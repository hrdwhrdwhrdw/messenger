"use strict";(self.webpackChunkmessenger=self.webpackChunkmessenger||[]).push([[581],{5508:function(e,n,r){r.d(n,{Wd:function(){return t},tI:function(){return s},Cj:function(){return i}});var t="#7663fd",s="#321738",i="#fff"},51581:function(e,n,r){r.r(n),r.d(n,{default:function(){return ee}});var t=r(1413),s=r(70885),i=r(72791),a=r(60364),u=r(60668),c=function(e){return e.usersPage.users},o=function(e){return e.usersPage.pageSize},l=function(e){return e.usersPage.totalUsersCount},f=function(e){return e.usersPage.currentPage},d=function(e){return e.usersPage.portionSize},m=function(e){return e.usersPage.isFetching},p=function(e){return e.usersPage.followingInProgress},h=function(e){return e.usersPage.filter},g=r(15861),x=r(87757),v=r.n(x),_=r(20713),j=function(e){return{type:_.mL,userId:e}},b=function(e){return{type:_._3,userId:e}},w=function(e){return{type:_.b1,users:e}},N=function(e){return{type:_.aw,totalUsersCount:e}},S=function(e){return{type:_.XS,currentPage:e}},Z=function(e){return{type:_.bg,filter:e}},P=function(e){return{type:_.E3,isFetching:e}},C=function(e,n){return{type:_.IK,isFetching:e,userId:n}},F=r(26229),k=function(e,n,r){return(0,g.Z)(v().mark((function t(){var s;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.e.get("users?count=".concat(e,"&page=").concat(n,"&term=").concat(r.term,"&friend=").concat(r.isFriend));case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}}),t)})))()},y=function(e){return(0,g.Z)(v().mark((function n(){var r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F.e.post("follow/".concat(e));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}),n)})))()},U=function(e){return F.e.delete("follow/".concat(e))},I=r(62317),z=function(e,n,r){return function(){var t=(0,g.Z)(v().mark((function t(s){var i;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(P(!0)),s(S(n)),s(Z(r)),t.next=5,k(e,n,r);case 5:i=t.sent,s(P(!1)),s(w(i.items)),s(N(i.totalCount));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=r(36517),M=r(83272),A={pagination:"Pagination_pagination__rHtt7",button:"Pagination_button__xqsAl",active:"Pagination_active__CaaUD"},K=r(80184),O=function(e){var n=e.totalItemsCount,r=e.pageSize,t=e.currentPage,a=e.onPageChange,u=e.portionSize;(0,i.useEffect)((function(){return h(Math.ceil(t/u))}),[t,u]);for(var c=[],o=Math.ceil(n/r),l=1;l<=o;l++)c.push(l);var f=Math.ceil(o/u),d=(0,i.useState)(1),m=(0,s.Z)(d,2),p=m[0],h=m[1],g=(p-1)*u+1,x=p*u;return(0,K.jsxs)("div",{className:A.pagination,children:[p>1?(0,K.jsx)(E.Z,{className:A.button,onClick:function(){h(p-1)},children:(0,K.jsx)(M.Z,{sx:{transform:"rotate(180deg)"}})}):(0,K.jsx)(E.Z,{className:A.button,onClick:function(){h(p-1)},disabled:!0,children:(0,K.jsx)(M.Z,{sx:{transform:"rotate(180deg)"}})}),c.filter((function(e){return e>=g&&e<=x})).map((function(e){return(0,K.jsx)(E.Z,{className:e===t?[A.button,A.active].join(" "):A.button,onClick:function(n){return a(e)},children:e},e)})),p<f&&(0,K.jsx)(E.Z,{className:A.button,onClick:function(){h(p+1)},children:(0,K.jsx)(M.Z,{})})]})},V=r(13901),W=r(20501),Y=r(5508),H=function(e){var n=e.followingInProgress,r=e.follow,t=e.unfollow,s=e.user,i={fontSize:"12px",width:"80px",color:Y.Cj,fontWeight:"bold",border:"2px solid #8169ff",borderRadius:"20px",textTransform:"capitalize","&:hover":{backgroundColor:Y.Wd}};return(0,K.jsxs)("div",{className:"user__item",children:[(0,K.jsx)("div",{children:(0,K.jsx)(W.rU,{to:"/profile/"+s.id,children:(0,K.jsx)("img",{src:s.photos.small||V,alt:"",className:"user__image"})})}),(0,K.jsxs)("div",{className:"user__info",children:[(0,K.jsx)("div",{className:"user__name",children:(0,K.jsx)("span",{children:s.name})}),(0,K.jsx)("div",{className:"user__status",children:(0,K.jsx)("span",{children:s.status})}),s.followed?(0,K.jsx)(E.Z,{disabled:n.some((function(e){return e===s.id})),onClick:function(){t(s.id)},sx:i,className:"user__button",children:"Unfollow"}):(0,K.jsx)(E.Z,{disabled:n.some((function(e){return e===s.id})),onClick:function(){r(s.id)},sx:i,className:"user__button",children:"Follow"})]})]})},L=function(e){var n=e.pageSize,r=e.currentPage,t=e.onPageChange,s=(0,a.v9)(c),i=(0,a.v9)(l),u=(0,a.v9)(d),o=(0,a.v9)(p),f=(0,a.I0)(),m=function(e){f(function(e){return function(){var n=(0,g.Z)(v().mark((function n(r){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(C(!0,e)),n.next=3,y(e);case 3:n.sent.resultCode===I.Y.Success&&r(j(e)),r(C(!1,e));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))},h=function(e){f(function(e){return function(){var n=(0,g.Z)(v().mark((function n(r){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(C(!0,e)),n.next=3,U(e);case 3:n.sent.data.resultCode===I.Y.Success&&r(b(e)),r(C(!1,e));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))};return(0,K.jsxs)("div",{className:"user",children:[(0,K.jsx)("div",{className:"user__list",children:s.map((function(e){return(0,K.jsx)(H,{user:e,followingInProgress:o,follow:m,unfollow:h},e.id)}))}),(0,K.jsx)(O,{totalItemsCount:i,pageSize:n,currentPage:r,onPageChange:t,portionSize:u})]})},R=r(16871),q=r(55705),D=r(99609),G="UserSearchForm_title__u2SMA",J="UserSearchForm_input__j40kY",T="UserSearchForm_form__HOeLK",X="UserSearchForm_select__G-dVa",B="UserSearchForm_option__9V0dt",Q="UserSearchForm_button__rjKrx",$=function(e){var n=e.setUserFilter,r=(0,a.v9)(h);return(0,K.jsxs)("div",{className:T,children:[(0,K.jsx)("h1",{className:G,children:"Search user"}),(0,K.jsx)(q.J9,{initialValues:{term:r.term,isFriend:String(r.isFriend)},enableReinitialize:!0,onSubmit:function(e,r){var t=r.setSubmitting;n(e),t(!1)},children:(0,K.jsxs)(q.l0,{children:[(0,K.jsx)(q.gN,{id:"term",name:"term",placeholder:"Search user...",className:J}),(0,K.jsxs)(q.gN,{as:"select",name:"isFriend",className:X,children:[(0,K.jsx)("option",{className:B,value:"null",children:"All users"}),(0,K.jsx)("option",{className:B,value:"true",children:"Only followed"}),(0,K.jsx)("option",{className:B,value:"false",children:"Only unfollowed"})]}),(0,K.jsx)(D.Z,{type:"submit",className:Q,children:"Submit"})]})})]})},ee=function(){var e=(0,a.I0)(),n=(0,a.v9)(o),r=(0,a.v9)(f),c=(0,a.v9)(h),l=(0,R.s0)(),d=(0,W.lr)(),p=(0,s.Z)(d,2),g=p[0];p[1];(0,i.useEffect)((function(){var s=g.get("term"),i=g.get("friend"),a=Number(g.get("page")),u=r,o=c;switch(a&&(u=a),s&&(o=(0,t.Z)((0,t.Z)({},o),{},{term:s})),i){case"null":o=(0,t.Z)((0,t.Z)({},o),{},{isFriend:null});break;case"true":o=(0,t.Z)((0,t.Z)({},o),{},{isFriend:!0});break;case"false":o=(0,t.Z)((0,t.Z)({},o),{},{isFriend:!1})}e(z(n,u,o))}),[]),(0,i.useEffect)((function(){l({search:"?term=".concat(c.term,"&friend=").concat(c.isFriend,"&page=").concat(r)})}),[c,r]);var x=function(r){e(z(n,1,r))},v=(0,a.v9)(m);return(0,K.jsxs)("div",{className:"user__container",children:[(0,K.jsx)($,{setUserFilter:x}),v?(0,K.jsx)(u.Z,{}):(0,K.jsx)(L,{pageSize:n,currentPage:r,onPageChange:function(r){e(z(n,r,c))},setUsersFilter:x})]})}},13901:function(e,n,r){e.exports=r.p+"static/media/i.14469a22fe94b0254dd2.webp"}}]);
//# sourceMappingURL=581.26b8f55e.chunk.js.map